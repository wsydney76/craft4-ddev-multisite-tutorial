{# Get localized versions of the current entry #}
{% set localizedEntries = entry.localized.indexBy('siteId').collect %}

{# Sites within a group can be sorted #}
{% for site in craft.app.sites.sitesByGroupId(entry.site.groupId) %}
    {% if site.id == entry.site.id %}
        {# currentSite: just show the highlighted name #}
        <span class="font-semibold">{{ _self.getLang(entry) }}</span>
    {% elseif localizedEntries[site.id] is defined %}
        {# link to localized version #}
        <a href="{{ localizedEntries[site.id].url }}">{{ _self.getLang(localizedEntries[site.id]) }}</a>
    {% endif %}
{% endfor %}

{# Get the language name from locale #}
{% macro getLang(entry) %}
    {# displayName is in the form 'language (country)' #}
    {{ (entry.site.locale.displayName|split(' (')[0]|capitalize) }}
{% endmacro %}
